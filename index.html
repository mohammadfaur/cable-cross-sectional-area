<!DOCTYPE html>
<html lang="he" class="dark-mode rtl">
<head>
  <meta charset="UTF-8">
  <title>תכנון מעגל חשמלי</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="header-row">
      <h2 id="app-title">תכנון מעגל חשמלי</h2>
      <div class="controls-row">
        <div class="language-toggle">
          <button id="lang-toggle" class="lang-btn">EN</button>
        </div>
        <div class="theme-toggle">
          <input type="checkbox" id="theme-switch">
          <label for="theme-switch" class="toggle-label">
            <span class="toggle-icon light">☀️</span>
            <span class="toggle-icon dark">🌙</span>
            <span class="toggle-ball"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- Calculator Selection Buttons -->
    <div class="calculator-buttons">
      <button class="calc-btn" id="rx-finder-btn" onclick="toggleCalculatorSection('rx-finder-section')">מוצא r ו-x</button>
      <button class="calc-btn" id="cable-impedance-btn" onclick="toggleCalculatorSection('impedance-section')">עכבת כבל</button>
      <button class="calc-btn" id="voltage-drop-btn" onclick="toggleCalculatorSection('voltage-drop-section')">מפל מתח</button>
      <button class="calc-btn" id="short-circuit-1ph-btn" onclick="toggleCalculatorSection('short-circuit-1ph-section')">קצר חד-פאזי</button>
      <button class="calc-btn" id="short-circuit-3ph-btn" onclick="toggleCalculatorSection('short-circuit-3ph-section')">קצר תלת-פאזי</button>
      <button class="calc-btn show-hide-all" id="show-hide-all-btn" onclick="toggleAllSections()">הצג/הסתר הכל</button>
    </div>

    <!-- R&X Finder Section -->
    <div class="rx-finder-section" id="rx-finder-section">
      <h3 id="rx-finder-title">מוצא התנגדות והיגב ליחידת אורך של כבלים</h3>
      
      <label id="material-label">חומר:</label>
      <div class="radio-group">
        <input type="radio" id="copper" name="material" value="copper" checked>
        <label for="copper" id="copper-label">נחושת</label>
        <input type="radio" id="aluminium" name="material" value="aluminium">
        <label for="aluminium" id="aluminium-label">אלומיניום</label>
      </div>

      <label id="core-label">סוג כבל:</label>
      <div class="radio-group">
        <input type="radio" id="single" name="core" value="single" checked>
        <label for="single" id="single-label">חד-גידי</label>
        <input type="radio" id="multi" name="core" value="multi">
        <label for="multi" id="multi-label">רב-גידי</label>
      </div>

      <label id="area-label">שטח חתך (A) [ממ²]:</label>
      <input type="text" id="surface" list="surface-options" placeholder="הזן או בחר שטח חתך">
      <datalist id="surface-options">
        <option value="1.5">1.5 mm²</option>
        <option value="2.5">2.5 mm²</option>
        <option value="4">4 mm²</option>
        <option value="6">6 mm²</option>
        <option value="10">10 mm²</option>
        <option value="16">16 mm²</option>
        <option value="25">25 mm²</option>
        <option value="35">35 mm²</option>
        <option value="50">50 mm²</option>
        <option value="70">70 mm²</option>
        <option value="95">95 mm²</option>
        <option value="120">120 mm²</option>
        <option value="150">150 mm²</option>
        <option value="185">185 mm²</option>
        <option value="240">240 mm²</option>
        <option value="300">300 mm²</option>
      </datalist>

      <button onclick="findRX()" id="find-btn">קבל r ו-x</button>

      <div class="result" id="output"></div>
    </div>
    
    <!-- Cable Impedance Calculator Section -->
    <div class="impedance-section" id="impedance-section">
      <h3 id="calc-title">חישוב עכבת כבל</h3>
      
      <div class="math-equation">
        <div class="equation-content">
          <span class="equation-variable">Z</span>
          <span class="equation-equals">=</span>
          <div class="equation-fraction">
            <div class="fraction-numerator">
              <span class="equation-variable">L</span>
            </div>
            <div class="fraction-line"></div>
            <div class="fraction-denominator">
              <span class="equation-variable">n</span>
            </div>
          </div>
          <span class="equation-dot">·</span>
          <span class="equation-parenthesis">(</span>
          <span class="equation-variable">r</span>
          <span class="equation-plus">+</span>
          <span class="equation-variable">j</span>
          <span class="equation-variable">x</span>
          <span class="equation-parenthesis">)</span>
        </div>
        <div class="equation-legend">
          <div class="legend-item">
            <span id="impedance-legend">Z # עכבה [Ω]</span>
          </div>
          <div class="legend-item">
            <span id="length-legend">L # אורך כבל [km]</span>
          </div>
          <div class="legend-item">
            <span id="cables-legend">n # מספר כבלים במקביל</span>
          </div>
          <div class="legend-item">
            <span id="resistance-legend">r # התנגדות [Ω/km]</span>
          </div>
          <div class="legend-item">
            <span id="reactance-legend">x # היגב [Ω/km]</span>
          </div>
        </div>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="r-value" id="r-value-label">התנגדות (r) [Ω/km]:</label>
          <input type="number" id="r-value" step="0.001" placeholder="הזן ערך r">
        </div>
        <button class="copy-btn" onclick="copyRValue()" id="copy-r-btn">העתק מלמעלה</button>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="x-value" id="x-value-label">היגב (x) [Ω/km]:</label>
          <input type="number" id="x-value" step="0.001" placeholder="הזן ערך x">
        </div>
        <button class="copy-btn" onclick="copyXValue()" id="copy-x-btn">העתק מלמעלה</button>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="cable-length" id="cable-length-label">אורך כבל (L) [km]:</label>
          <input type="number" id="cable-length" step="0.01" placeholder="הזן אורך כבל">
        </div>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="num-cables" id="num-cables-label">מספר כבלים במקביל (n):</label>
          <input type="number" id="num-cables" step="1" min="1" value="1" placeholder="הזן מספר כבלים">
        </div>
      </div>
      
      <button onclick="calculateImpedance()" id="calc-btn">חשב עכבה</button>
      
      <div class="result" id="impedance-output"></div>
    </div>

    <!-- Voltage Drop Calculator Section -->
    <div class="impedance-section" id="voltage-drop-section" style="display: none;">
      <h3 id="voltage-drop-title">חישוב מפל מתח</h3>
      
      <div class="math-equation">
        <div class="equation-content">
          <span class="equation-variable">∆V</span>
          <span class="equation-equals">=</span>
          <span class="equation-variable">k</span>
          <span class="equation-dot">·</span>
          <span class="equation-variable">I</span><sub class="equation-subscript">b</sub>
          <span class="equation-dot">·</span>
          <div class="equation-fraction">
            <div class="fraction-numerator">
              <span class="equation-variable">L</span>
            </div>
            <div class="fraction-line"></div>
            <div class="fraction-denominator">
              <span class="equation-variable">n</span>
            </div>
          </div>
          <span class="equation-dot">·</span>
          <span class="equation-parenthesis">(</span>
          <span class="equation-variable">r</span>
          <span class="equation-dot">·</span>
          <span class="equation-function">cos</span>
          <span class="equation-parenthesis">(</span>
          <span class="equation-variable">α</span>
          <span class="equation-parenthesis">)</span>
          <span class="equation-plus">+</span>
          <span class="equation-variable">x</span>
          <span class="equation-dot">·</span>
          <span class="equation-function">sin</span>
          <span class="equation-parenthesis">(</span>
          <span class="equation-variable">α</span>
          <span class="equation-parenthesis">)</span>
          <span class="equation-parenthesis">)</span>
        </div>
        <div class="equation-legend">
          <div class="legend-item">
            <span id="vd-voltage-drop-legend">∆V # מפל מתח [V]</span>
          </div>
          <div class="legend-item">
            <span id="vd-k-factor-legend">k # מקדם (√3 תלת-פאזי, 2 חד-פאזי)</span>
          </div>
          <div class="legend-item">
            <span id="vd-load-current-legend">Ib # זרם עומס [A]</span>
          </div>
          <div class="legend-item">
            <span id="vd-distance-legend">L # מרחק (כיוון אחד) [km]</span>
          </div>
          <div class="legend-item">
            <span id="vd-conductors-legend">n # מספר מוליכים</span>
          </div>
          <div class="legend-item">
            <span id="vd-phase-angle-legend">α # זווית פאזה [°]</span>
          </div>
        </div>
      </div>
      
      <label id="phase-type-label">סוג מערכת:</label>
      <div class="radio-group">
        <input type="radio" id="single-phase" name="phase-type" value="single" checked>
        <label for="single-phase" id="single-phase-label">חד-פאזי</label>
        <input type="radio" id="three-phase" name="phase-type" value="three">
        <label for="three-phase" id="three-phase-label">תלת-פאזי</label>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="load-current" id="load-current-label">זרם עומס (Ib) [A]:</label>
          <input type="number" id="load-current" step="0.1" min="0" placeholder="הזן זרם עומס">
        </div>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="distance" id="distance-label">מרחק (L) [km]:</label>
          <input type="number" id="distance" step="0.01" min="0" placeholder="הזן מרחק">
        </div>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="num-conductors" id="num-conductors-label">מספר מוליכים (n):</label>
          <input type="number" id="num-conductors" step="1" min="1" value="1" placeholder="הזן מספר מוליכים">
        </div>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="vd-r-value" id="vd-r-value-label">התנגדות (r) [Ω/km]:</label>
          <input type="number" id="vd-r-value" step="0.001" placeholder="הזן ערך r">
        </div>
        <button class="copy-btn" onclick="copyVDRValue()" id="copy-vd-r-btn">העתק מלמעלה</button>
      </div>
      
      <div class="input-row">
        <div class="input-group">
          <label for="vd-x-value" id="vd-x-value-label">היגב (x) [Ω/km]:</label>
          <input type="number" id="vd-x-value" step="0.001" placeholder="הזן ערך x">
        </div>
        <button class="copy-btn" onclick="copyVDXValue()" id="copy-vd-x-btn">העתק מלמעלה</button>
      </div>
      
      <!-- Power Factor and Phase Angle side by side -->
      <div class="angle-input-row">
        <div class="angle-input-group">
          <label for="power-factor" id="power-factor-label">Power Factor (PF):</label>
          <input type="number" id="power-factor" step="0.01" min="-1" max="1" placeholder="הזן PF (-1 עד 1)">
        </div>
        <div class="angle-or-separator">
          <span id="angle-or-text">או</span>
        </div>
        <div class="angle-input-group">
          <label for="phase-angle" id="phase-angle-label">זווית פאזה (α) [°]:</label>
          <input type="number" id="phase-angle" step="0.1" placeholder="הזן זווית פאזה">
        </div>
      </div>
      
      <button onclick="calculateVoltageDrop()" id="calculate-vd-btn">חשב מפל מתח</button>
      
      <div class="result" id="voltage-drop-output"></div>
    </div>

    <div class="impedance-section" id="short-circuit-1ph-section" style="display: none;">
      <h3>חישוב קצר חד-פאזי</h3>
      <p>מחשבון קצר חד-פאזי יתווסף בקרוב...</p>
    </div>

    <div class="impedance-section" id="short-circuit-3ph-section" style="display: none;">
      <h3>חישוב קצר תלת-פאזי</h3>
      <p>מחשבון קצר תלת-פאזי יתווסף בקרוב...</p>
    </div>
  </div>
  
  <script src="scripts/localized/lang.js"></script>
  <script src="scripts/localized/translate.js"></script>
  <script src="scripts/styles/theme.js"></script>
  <script src="scripts/fetch_rx.js"></script>
  <script src="scripts/impedance.js"></script>
  <script src="scripts/voltage_drop.js"></script>
  <script src="scripts/calculators.js"></script>
  <script src="script.js"></script>
</body>
</html>
